{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header">
        <i class="fas fa-gem"></i> 私人定制 · 高端专属（年卡及以上）
    </div>
    <div class="card-body">
        <p class="text-muted">年卡/终身会员专享。价格表没有您要的项目或想一对一定制？填写下方信息，将发布到<strong>待分配订单</strong>，打手可浏览并接单。</p>
        {% if current_customer %}
        <div class="alert alert-info py-2">您已登录，将以此账号（{{ current_customer.phone }}）发布。</div>
        {% endif %}
        <form method="POST" enctype="multipart/form-data">
            <div class="mb-3">
                <label class="form-label">手机号 *</label>
                <input type="tel" name="phone" class="form-control" value="{{ current_customer.phone if current_customer else '' }}" {{ 'readonly' if current_customer else '' }} required>
            </div>
            <div class="mb-3">
                <label class="form-label">称呼</label>
                <input type="text" name="name" class="form-control" value="{{ current_customer.name if current_customer else '' }}" placeholder="选填">
            </div>
            <div class="mb-3">
                <label class="form-label">游戏 *</label>
                <input type="text" name="game" class="form-control" list="game_list" placeholder="如：原神、鸣潮、星铁、永劫无间" required>
                <datalist id="game_list">
                    {% for g in games %}
                    <option value="{{ g[0] }}">
                    {% endfor %}
                </datalist>
            </div>
            <div class="mb-3">
                <label class="form-label">任务类型 *</label>
                <input type="text" name="task_type" class="form-control" placeholder="如：日常、周本、指定任务" required>
            </div>
            <div class="mb-3">
                <label class="form-label">您愿意出的价格（元）*</label>
                <input type="number" name="offered_price" class="form-control" step="0.01" min="0.01" placeholder="请输入金额" required>
            </div>
            <div class="mb-3">
                <label class="form-label">需求描述 *</label>
                <textarea name="description" class="form-control" rows="5" required placeholder="详细说明您的需求"></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">截图/附件（可选）</label>
                <div class="drop-zone">
                    <span class="drop-zone-hint"><i class="fas fa-cloud-upload-alt"></i> 拖到此处或点击选择</span>
                    <input type="file" name="screenshot" class="form-control">
                </div>
            </div>
            <button type="submit" class="btn btn-primary">发布到待分配</button>
            <a href="{{ url_for('customer_order') }}" class="btn btn-outline-secondary">按价格表下单</a>
            <a href="{{ url_for('customer_request_submit') }}" class="btn btn-outline-info ms-2">没有价格表？去提交需求</a>
        </form>
    </div>
</div>
{% endblock %}
